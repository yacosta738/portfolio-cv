---
import { cn } from "@/lib/utils";

export interface Props {
	as?: "h1" | "h2" | "h3" | "h4" | "p" | "span" | "time";
	variant?: "title" | "subtitle" | "body" | "small" | "muted" | "date";
	class?: string;
	/** When true and variant === 'date', add a predictable min-width so date columns align (e.g. min-w-[8ch]) */
	dateFixedWidth?: boolean;
}

type Variant = NonNullable<Props["variant"]>;

const {
	as: Element = "p",
	variant = "body",
	class: className,
	dateFixedWidth = false,
	...rest
} = Astro.props as Props;

const variantStyles: Record<Variant, string> = {
	// Use a centralized design token for foreground text so callers don't need
	// to repeat light/dark color utilities. If the project wants a different
	// token name, update these entries and the Tailwind theme accordingly.
	title:
		"text-4xl font-normal text-foreground my-4 dark:text-foreground-inverse",
	subtitle:
		"text-lg font-medium text-foreground my-6 dark:text-foreground-inverse",
	body: "text-sm leading-6 text-foreground my-2 dark:text-foreground-inverse",
	small: "text-xs leading-5 text-foreground my-2 dark:text-foreground-inverse",
	muted: "text-sm text-foreground/70 dark:text-foreground-inverse/70 my-2",
	date: "text-sm text-foreground cursor-default dark:text-foreground-inverse my-2 tabular-nums text-right",
};

// If the caller requests a fixed width for date columns, add a font-relative
// minimum width so tabular numbers align predictably. We choose 8ch as a
// reasonable default; consumers can override with custom className if needed.
const dateWidthClass =
	dateFixedWidth && variant === "date" ? "min-w-[8ch]" : "";

const classes = cn(
	"last:mb-0",
	variantStyles[variant as Variant],
	dateWidthClass,
	className,
);
---

<Element class={classes} {...rest}>
	<slot />
</Element>
