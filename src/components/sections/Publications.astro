---
import ItemList from "@atoms/ItemList.astro";
import Section from "@atoms/Section.astro";
import { type Lang, useTranslations } from "@/i18n";
import type Publication from "@/resume/publication/publication.model";

interface Props {
	publications?: Publication[];
}

const { publications = [] } = Astro.props as Props;
const currentLocale = Astro.params.lang as Lang;
const t = useTranslations(currentLocale);

const mappedPublications = publications.map((p) => ({
	title: p.name,
	date: p.releaseDate.getFullYear().toString(),
	organization: p.publisher,
	content: p.summary,
	url: p.url,
}));
---

{publications.length > 0 && (
	<Section title={t('publications')}>
		<ItemList items={mappedPublications} variant="detailed" />
	</Section>
)}
